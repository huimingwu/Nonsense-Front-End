<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>JavaScript函数式编程 | 糊说 · 前端</title>
    <meta name="description" content="前端进阶2018">
    <link rel="shortcut icon" type="image/x-icon" href="./favicon.ico">
    
    <link rel="preload" href="/nonsense-front-end/assets/css/14.styles.660e642a.css" as="style"><link rel="preload" href="/nonsense-front-end/assets/js/app.f2e37e93.js" as="script"><link rel="preload" href="/nonsense-front-end/assets/js/5.5882e617.js" as="script"><link rel="prefetch" href="/nonsense-front-end/assets/js/8.5a49f5e8.js"><link rel="prefetch" href="/nonsense-front-end/assets/js/1.a386d61b.js"><link rel="prefetch" href="/nonsense-front-end/assets/js/2.30ec5e77.js"><link rel="prefetch" href="/nonsense-front-end/assets/js/3.46d358de.js"><link rel="prefetch" href="/nonsense-front-end/assets/js/4.1d0e363f.js"><link rel="prefetch" href="/nonsense-front-end/assets/js/6.107f0d23.js"><link rel="prefetch" href="/nonsense-front-end/assets/js/7.7256072f.js"><link rel="prefetch" href="/nonsense-front-end/assets/js/0.6d6198ca.js"><link rel="prefetch" href="/nonsense-front-end/assets/js/9.a4b7e1dd.js"><link rel="prefetch" href="/nonsense-front-end/assets/js/10.ed68d5df.js"><link rel="prefetch" href="/nonsense-front-end/assets/js/11.e50cfcf7.js"><link rel="prefetch" href="/nonsense-front-end/assets/js/12.93c03222.js"><link rel="prefetch" href="/nonsense-front-end/assets/js/13.60f36ed3.js">
    <link rel="stylesheet" href="/nonsense-front-end/assets/css/14.styles.660e642a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/nonsense-front-end/" class="home-link router-link-active"><!----><span class="site-name">
      糊说 · 前端
    </span></a><div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div><nav class="nav-links can-hide"><div class="nav-item"><a href="https://segmentfault.com/u/wuhuiming" target="_blank" rel="noopener noreferrer" class="nav-link external">
  博客
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/huimingwu/nonsense-front-end" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GITHUB
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><!----></nav></div></header><div class="sidebar-mask"></div><div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://segmentfault.com/u/wuhuiming" target="_blank" rel="noopener noreferrer" class="nav-link external">
  博客
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/huimingwu/nonsense-front-end" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GITHUB
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><!----></nav><ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>一、JavaScript的新发展</span><!----></p><ul class="sidebar-group-items"><li><a href="/nonsense-front-end/doc/javascript-new-develop/js-functional-programming.html" class="sidebar-link">1.1 JavaScript函数式编程</a></li><li><a href="/nonsense-front-end/doc/javascript-new-develop/js-QA.html" class="active sidebar-link">1.2 JavaScript与QA测试工程师</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/nonsense-front-end/doc/javascript-new-develop/js-QA.html#单元测试" class="sidebar-link">单元测试</a></li><li class="sidebar-sub-header"><a href="/nonsense-front-end/doc/javascript-new-develop/js-QA.html#性能测试" class="sidebar-link">性能测试</a></li><li class="sidebar-sub-header"><a href="/nonsense-front-end/doc/javascript-new-develop/js-QA.html#安全测试" class="sidebar-link">安全测试</a></li><li class="sidebar-sub-header"><a href="/nonsense-front-end/doc/javascript-new-develop/js-QA.html#功能测试" class="sidebar-link">功能测试</a></li><li class="sidebar-sub-header"><a href="/nonsense-front-end/doc/javascript-new-develop/js-QA.html#jslint与jshint" class="sidebar-link">JsLint与JsHint</a></li></ul></li><li><a href="/nonsense-front-end/doc/javascript-new-develop/js-quintessence.html" class="sidebar-link">1.3 JavaScript语言精粹</a></li><li><a href="/nonsense-front-end/doc/javascript-new-develop/es-in-enterprise-application.html" class="sidebar-link">1.4 ES6在企业中的应用</a></li><li><a href="/nonsense-front-end/doc/javascript-new-develop/typescript.html" class="sidebar-link">1.5 TypeScript前世今生</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>二、Nodejs 72般变化</span><!----></p><ul class="sidebar-group-items"><li><a href="/nonsense-front-end/doc/nodejs-72s-changes/http.html" class="sidebar-link">2.1 HTTP协议那些事</a></li><li><a href="/nonsense-front-end/doc/nodejs-72s-changes/nodeJS-project-architecture-and-optimization.html" class="sidebar-link">2.2 大规模NodeJS项目架构与优化</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>三、前端工程化那些事</span><!----></p><ul class="sidebar-group-items"><li><a href="/nonsense-front-end/doc/front-end-engineering/1.html" class="sidebar-link">3.1 Linux预备知识</a></li><li><a href="/nonsense-front-end/doc/front-end-engineering/2.html" class="sidebar-link">3.2 从小到大论前端项目持续集成</a></li><li><a href="/nonsense-front-end/doc/front-end-engineering/3.html" class="sidebar-link">3.3 前端架构那些事儿</a></li><li><a href="/nonsense-front-end/doc/front-end-engineering/4.html" class="sidebar-link">3.4 WebPack从入门到放弃</a></li><li><a href="/nonsense-front-end/doc/front-end-engineering/5.html" class="sidebar-link">3.5 前端工程化预备知识</a></li><li><a href="/nonsense-front-end/doc/front-end-engineering/6.html" class="sidebar-link">3.6 FIS从入门到放弃</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>更新中...</span><!----></p><ul class="sidebar-group-items"></ul></div></li></ul></div><div class="page"><div class="content"><h1 id="javascript函数式编程"><a href="#javascript函数式编程" aria-hidden="true" class="header-anchor">#</a> JavaScript函数式编程</h1><p></p><div class="table-of-contents"><ul><li><a href="#单元测试">单元测试</a><ul><li><a href="#why">why?</a></li><li><a href="#单元测试">单元测试</a></li><li><a href="#单元测试框架">单元测试框架</a></li><li><a href="#运行流程">运行流程</a></li><li><a href="#自动化单元测试">自动化单元测试</a></li><li><a href="#报告和单元测试覆盖率检查">报告和单元测试覆盖率检查</a></li></ul></li><li><a href="#性能测试">性能测试</a><ul><li><a href="#基准测试">基准测试</a></li><li><a href="#压力测试">压力测试</a></li></ul></li><li><a href="#安全测试">安全测试</a></li><li><a href="#功能测试">功能测试</a><ul><li><a href="#用户真实性检查">用户真实性检查</a></li></ul></li><li><a href="#jslint与jshint">JsLint与JsHint</a></li></ul></div><p></p><h2 id="单元测试"><a href="#单元测试" aria-hidden="true" class="header-anchor">#</a> 单元测试</h2><h3 id="why"><a href="#why" aria-hidden="true" class="header-anchor">#</a> why?</h3><ul><li>正确性：测试可以验证代码的正确性，在上线前做到心里有底</li><li>自动化：当然手工也可以测试，通过console可以打印出内部信息，但是这是一次性的事情，下次测试还需要从头来过，效率不能得到保证。通过编写测试用例，可以做到一次编写，多次运行</li><li>解释性：测试用例用于测试接口、模块的重要性，那么在测试用例中就会涉及如何使用这些API。其他开发人员如果要使用这些API，那阅读测试用例是一种很好地途径，有时比文档说明更清晰</li><li>驱动开发，指导设计：代码被测试的前提是代码本身的可测试性，那么要保证代码的可测试性，就需要在开发中注意API的设计，TDD将测试前移就是起到这么一个作用</li><li>保证重构：互联网行业产品迭代速度很快，迭代后必然存在代码重构的过程，那怎么才能保证重构后代码的质量呢？有测试用例做后盾，就可以大胆的进行重构</li></ul><h3 id="单元测试-2"><a href="#单元测试-2" aria-hidden="true" class="header-anchor">#</a> 单元测试</h3><ul><li>目的：单元测试能够让开发者明确知道代码结果</li><li>原则：单一职责、接口抽象、层次分离</li><li>断言库：保证最小单元是否正常运行检测方法</li><li>测试风格：测试驱动开发(Test-Driven Development,TDD)、(Behavior Driven Development,BDD)行为驱动开发均是敏捷开发方法论。TDD关注所有的功能是否被实现(每一个功能都必须有对应的测试用例)，suite配合test利用assert('tobi' == user.name);BDD关注整体行为是否符合整体预期,编写的每一行代码都有目的提供一个全面的测试用例集。expect/should,describe配合it利用自然语言expect(1).toEqual(fn())执行结果。</li></ul><h3 id="单元测试框架"><a href="#单元测试框架" aria-hidden="true" class="header-anchor">#</a> 单元测试框架</h3><ul><li>better-assert(TDD断言库Github 190star 19fork)</li><li>should.js(BDD断言库Github 2295star 194fork)</li><li>expect.js(BDD断言库Github 1391star 162fork)</li><li>chai.js(TDD BDD双模Github 2823star 271fork)</li><li>Jasmine.js(BDD Github10723star1680fork)</li><li>Node.js本身集成 require(“assert”);</li><li>Intern 更是一个大而全的单元测试框架</li><li>QUnit 一个游离在jQuery左右的测试框架</li><li>Macaca 一套完整的自动化测试解决方案 国产神器来自阿里巴巴</li></ul><h3 id="运行流程"><a href="#运行流程" aria-hidden="true" class="header-anchor">#</a> 运行流程</h3><p>每一个测试用例组通过describe进行设置<br>
图1</p><ol><li>before单个测试用例(it)开始前</li><li>beforeEach每一个测试用例开始前</li><li>it定义测试用例 并利用断言库进行设置chai如：expect(x).to.equal(true);异步mocha</li><li>以上专业术语叫mock</li></ol><h3 id="自动化单元测试"><a href="#自动化单元测试" aria-hidden="true" class="header-anchor">#</a> 自动化单元测试</h3><p>karma 自动化runner集成PhantomJS无刷新</p><div class="language- extra-class"><pre class="language-text"><code>npm install -g karma
npm install karma-cli —save-dev
npm install karma-chrome-launcher —save-dev
npm install karma-phantomjs-launcher —save-dev
npm install karma-mocha —save-dev
npm install karma-chai —save-dev
</code></pre></div><h3 id="报告和单元测试覆盖率检查"><a href="#报告和单元测试覆盖率检查" aria-hidden="true" class="header-anchor">#</a> 报告和单元测试覆盖率检查</h3><div class="language- extra-class"><pre class="language-text"><code>npm install karma-coverage —save-dev
coverageReporter: { type: 'html',dir:'coverage/' } //配制代码覆盖测试率生成结果
</code></pre></div><p>图2</p><h2 id="性能测试"><a href="#性能测试" aria-hidden="true" class="header-anchor">#</a> 性能测试</h2><h3 id="基准测试"><a href="#基准测试" aria-hidden="true" class="header-anchor">#</a> 基准测试</h3><ul><li>面向切面编程AOP无侵入式统计</li><li>Benchmark基准测试方法，它并不是简单地统计执行多少次测试代码后对比时间，它对测试有着严密的抽样过程。执行多少次取决于采样到的数据能否完成统计。根据统计次数计算方差。</li></ul><h3 id="压力测试"><a href="#压力测试" aria-hidden="true" class="header-anchor">#</a> 压力测试</h3><ul><li>对网络接口做压力测试需要检查的几个常用指标有吞吐率、响应时间和并发数，这些指标反映了服务器并发处理能力。</li><li>PV网站当日访问人数 UV独立访问人数。PV每天几十万甚至上百万就需要考虑压力测试。换算公式QPS=PV/t ps：1000000/10<em>60</em>60=27.7(100万请求集中在10个小时，服务器每秒处理27.7个业务请求)</li><li>常用的压力测试工具是ab、siege、http_load。</li><li>ab -c 100 -n 100 http://localhost:8001 每秒持续发出28个请求<br>
Request per second 表示服务器每秒处理请求数 即为QPS<br>
Failed requests 表示此次请求失败的请求数 理论上压测值越大增加<br>
Connection Times 连接时间，它包括客户端向服务器端建立连接、服务器端处理请求、等待报文响应的过程</li></ul><h2 id="安全测试"><a href="#安全测试" aria-hidden="true" class="header-anchor">#</a> 安全测试</h2><p>###安全漏洞检查</p><ol><li>XSS</li><li>SQL</li><li>CSRF</li></ol><h2 id="功能测试"><a href="#功能测试" aria-hidden="true" class="header-anchor">#</a> 功能测试</h2><h3 id="用户真实性检查"><a href="#用户真实性检查" aria-hidden="true" class="header-anchor">#</a> 用户真实性检查</h3><ul><li>selenium-webdriver</li><li>protractor selenium-standalone</li><li>http://webdriver.io/ WEBDRIVERI/O</li><li>冒烟测试 SmokeTest 自由测试的一种，找到一个BUG开发修复，然后专门针对此BUG,优点节省生煎防止build失败，缺点是覆盖率极低。</li><li>回归测试 修改一处对整体功能全部测试，一般配合自动化测试。</li></ul><h2 id="jslint与jshint"><a href="#jslint与jshint" aria-hidden="true" class="header-anchor">#</a> JsLint与JsHint</h2><ul><li>目的：检测JavaScript代码标准</li><li>原因：JavaScript代码诡异，保证团队代码规范</li><li>搭配自动化任务管理工具完善自动化测试gruntjshint、grunt-jslint</li></ul><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>lint：http://www.jslint.com/<br>
hint: http://www.jshint.com/</p></div></div><div class="page-edit"><!----><!----></div><div class="page-nav"><p class="inner"><span class="prev">
        ← <a href="/nonsense-front-end/doc/javascript-new-develop/js-functional-programming.html" class="prev">
          1.1 JavaScript函数式编程
        </a></span><span class="next"><a href="/nonsense-front-end/doc/javascript-new-develop/js-quintessence.html">
          1.3 JavaScript语言精粹
        </a> →
      </span></p></div></div></div></div>
    <script src="/nonsense-front-end/assets/js/5.5882e617.js" defer></script><script src="/nonsense-front-end/assets/js/app.f2e37e93.js" defer></script>
  </body>
</html>
